\documentclass[12pt,a4paper,russian]{article}

\sloppy

\usepackage[small]{complexity}
\usepackage{csquotes}
\usepackage[russian,english]{babel}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{verbatim}
\usepackage{comment}
\usepackage{bookmark}
\usepackage{mathtools}
\usepackage{makecell,xcolor}
\usepackage{tikz}
\usepackage[backend=biber,style=alphabetic]{biblatex}

\usepackage{forloop}

\usepackage[left=2cm,right=2cm,top=2cm,bottom=2cm,bindingoffset=0cm]{geometry}
\usepackage{fancybox,fancyhdr}
\usepackage{lastpage}
\usepackage{titling}

\usepackage{fontspec}

\setmainfont[Ligatures={TeX,Historic}]{CMU Serif}
\setsansfont{CMU Sans Serif}
\setmonofont{Fira Code}[
	Contextuals=Alternate  % Activate the calt feature
]
\usepackage{listings}
\usepackage{lstfiracode}
\lstset{
	style=FiraCodeStyle,
    basicstyle=\small\ttfamily,   % Use \ttfamily for source code listings
    numbers=left,
	breaklines=true,
    postbreak=\mbox{\textcolor{red}{$\hookrightarrow$}\space}
}

\lstset{tabsize=4}

\newcommand{\map}[2]{\set{#1 \mid #2}}

\begin{document}

\selectlanguage{russian}

\section{Scapegoat tree}

\lstinputlisting[language=C++]{code/scapegoat_tree.h}

\end{document}
